<script>

function checkForAccess () {
	
    let displayStatus = document.getElementById("currentStatus");
	displayStatus.textContent = "Welcome!";

    {if ( typeof( DeviceMotionEvent ) !== "undefined" && typeof( DeviceMotionEvent.requestPermission ) === "function" )
     {      DeviceMotionEvent.requestPermission().then( 
            response => {         
                if ( response == "granted" ) {      
                    window.addEventListener( "devicemotion", (e) => {
                        displayStatus.textContent = e.accelerationIncludingGravity.x + ';' + e.accelerationIncludingGravity.x;
                        
                    })         
                    document.getElementById("actionButton").textContent = "Pause";
                    document.getElementById("actionButton").onclick = "pause()";
                }
                else
                {
                    displayStatus.textContent = "Permission Denied - restart browser allow access to motion.";
                }      
            }).catch( console.error ) 
     } 
     else 
     { 
	  displayStatus.textContent = "Your device does not seem to have the DeviceMotionEvent available."; 
     }
    }
}

function pause() {

    let displayStatus = document.getElementById("currentStatus");
	displayStatus.textContent = "Welcome!";
    document.getElementById("actionButton").textContent = "Start";
    document.getElementById("actionButton").onclick = "checkForAccess";

}

</script>
<div>When accessing various map/navigation applications the device will show a blue dot with a cone to indicate the direction the user is moving. <br/>
    Sometimes this the dot will show and move, but it is not possible to see what direction the user is moving into. (The cone is missing). <br/>
    This is related to the motion and orientation Permission. <br/>
    If the user does not give permission to the browser to access this capability, the cone will not be visible.<br/>
    The browser needs to be restarted for the permission to be enables. <br/>
    </div> 
<button id="actionButton" style="font-size:25" onclick="checkForAccess()">Start</button>
<div style="font-size:40" id='currentStatus'></div>
